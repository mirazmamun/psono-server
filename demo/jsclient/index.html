<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS Client</title>

    <!-- All of the following lines in head are kinda mandatory -->

    <!-- SCrypt and sha512 are mandatory -->
    <script src="libs/scrypt/browser/scrypt.js" type="text/javascript"></script>
    <script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha512.js" type="text/javascript"></script>

    <!-- Main Script -->
    <script src="client.js" type="text/javascript"></script>

    <!-- Jquery is used for all REST-API Calls -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <!-- Helper functions to call the actual functions with form parameters and display the output -->
    <script type="text/javascript">
        $(function () {
            (function () {
                "use strict";

                $('#generate_token_button_registration').click(function (event) {
                    event.preventDefault();
                    // do the magic
                    $('#logintoken_registration').val(client.generate_login_token($('#email_registration').val(), $('#password_registration')));
                });

                $('#generate_token_button_login').click(function (event) {
                    event.preventDefault();
                    // do the magic
                    $('#logintoken_login').val(client.generate_login_token($('#email_login').val(), $('#password_login')));
                });
            }());
        });

    </script>


    <!-- All of the following lines in head are only for styling -->

    <!-- JQuery UI is only used for some nice styling -->
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

    <!-- Just some Styles, not necessary :D  -->
    <style>
        .ui-widget {
            font-size: 0.9em;
        }
        section {
            margin: 20px;
        }

        section h3 {
            margin-left: -20px;
        }
    </style>

    <!-- Just some JS for JQuery UI styling, not necessary :D  -->
    <script>
        $(function () {
            $("#tabs").tabs();
        });
    </script>


</head>
<body>
<form>
    <h1>JS Client</h1>

    <p>This is a small demo client for the password manager in js</p>


    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Registration</a></li>
            <li><a href="#tabs-2">Login</a></li>
        </ul>
        <div id="tabs-1">
            <!-- START Registration -->
            <section>
                <h3>Step 1</h3>

                <p>Email and password are taken to generate the login token for registration </p>
                <h4>INPUT: </h4>
                <label for="email_registration">E-Mail: </label><input size="30" type="email" name="email_registration"
                                                                       id="email_registration" value="Test@test.com">
                <label for="password_registration">Password: </label><input size="30" type="text"
                                                                            name="password_registration"
                                                                            id="password_registration"
                                                                            value="myPassword">
                <br/>
                <INPUT type="button" name="button" value="1. Generate Login Token generate_login_token(email, password)"
                       id="generate_token_button_registration"/>
                <br/>
                <h4>OUTPUT: </h4>
                <label for="logintoken_registration">Logintoken: </label>
                <br/>
                <textarea rows="4" cols="60" name="logintoken_registration" id="logintoken_registration" readonly></textarea>
                <br/>
                <small>It should bethe following for "Test@test.com" and "myPassword":<br/>83b75ba167d1f93a643566fa7824424e0cab780f47d2d1a668e7ba42fa9f42622d09412b371bd7fd73ead1ceec612ccf5dfd61571c9cde0556bc0cd2126d62c3
                </small>
            </section>

            <hr>

            <section>
                <h3>Step 2</h3>

                <p>Email and login token (from step 1) are used to register with the server</p>

                <INPUT type="button" name="button"
                       value="2. Query the server for registration register(email, login_token)"
                       id="registration_submitbutton"/>
                <br/>
                <h4>OUTPUT: </h4>
                <label for="registration_request_feedback">Registration Request Feedback: </label>
                <br/>
                <textarea rows="4" cols="60" name="registration_request_feedback" id="registration_request_feedback" readonly></textarea>
                <br/>
                <small>Will return the user object or an error.
                </small>

            </section>
            <!-- END Registration -->
        </div>
        <div id="tabs-2">
            <!-- START Login -->
            <section>
                <h3>Step 1</h3>

                <p>Email and password are taken to generate the login token</p>
                <h4>INPUT: </h4>
                <label for="email_login">E-Mail: </label><input size="30" type="email" name="email_login"
                                                                id="email_login"
                                                                value="Test@test.com">
                <label for="password_login">Password: </label><input size="30" type="text" name="password_login"
                                                                     id="password_login" value="myPassword">
                <br/>
                <INPUT type="button" name="button" value="1. Generate Login Token generate_login_token(email, password)"
                       id="generate_token_button_login"/>
                <br/>
                <h4>OUTPUT: </h4>
                <label for="logintoken_login">Logintoken: </label>
                <br/>
                <textarea rows="4" cols="60" name="logintoken_login" id="logintoken_login" readonly></textarea>
                <br/>
                <small>It should bethe following for "Test@test.com" and "myPassword":<br/>83b75ba167d1f93a643566fa7824424e0cab780f47d2d1a668e7ba42fa9f42622d09412b371bd7fd73ead1ceec612ccf5dfd61571c9cde0556bc0cd2126d62c3
                </small>
            </section>

            <hr>

            <section>
                <h3>Step 2</h3>

                <p>Email and login token (from step 1) are used to get the encrypted data blob (keystorage) from the
                    server</p>

                <INPUT type="button" name="button"
                       value="2. Query the server for the keystorage get_encrypted_keystorage(email, login_token)"
                       id="step2_submitbutton"/>

            </section>
            <!-- END Login -->
        </div>
    </div>


</form>

</body>
</html>
